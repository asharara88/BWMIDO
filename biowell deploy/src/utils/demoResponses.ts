// Demo responses based on user's health data with variations
export const DEMO_RESPONSES: Record<string, string[]> = {
  "health status": [
    `Based on your recent metrics:

| Metric | Value | Status | Trend |
|--------|--------|--------|--------|
| Health Score | 82/100 | Good | ↑ +4% |
| Sleep Quality | 85% | Optimal | ↑ +15% |
| Recovery Score | 88/100 | Excellent | ↑ +5% |
| Daily Steps | 8,432 | Near Target | → |

### Key Insights
1. Sleep quality has improved significantly
2. Recovery metrics show good adaptation
3. Activity level is approaching targets

### Recommendations
1. Morning Activity
   - Add 1,500 steps to reach 10,000 goal
   - Consider morning walk routine

2. Recovery Optimization
   - Maintain current sleep schedule
   - Continue stress management practices`,
    
    `Based on your latest metrics:

| Metric | Current | Previous | Change |
|--------|---------|----------|--------|
| Overall Score | 79/100 | 75/100 | ↑ +4 |
| Activity | 8,432 steps | 7,850 steps | ↑ +582 |
| Sleep | 7.2 hours | 6.8 hours | ↑ +0.4 |
| HRV | 45ms | 42ms | ↑ +3ms |

### Strengths
- Your sleep duration is improving
- Activity level is trending upward
- Recovery metrics show positive adaptation

### Focus Areas
1. Deep sleep could be improved (currently 1.2 hours)
2. Evening stress levels are affecting recovery
3. Hydration is below optimal levels (estimated 1.8L/day)

Try adding a 15-minute morning walk and reducing screen time 90 minutes before bed.`
  ],

  "sleep": [
    `Based on your sleep data, here are structured recommendations:

| Current Metric | Your Value | Target Range | Status |
|---------------|------------|--------------|---------|
| Deep Sleep | 1.8 hrs | 1.5-2.0 hrs | ✓ Good |
| Sleep Duration | 7.2 hrs | 7-9 hrs | ! Improve |
| Sleep Timing | 11:30 PM | 10:00-10:30 PM | ! Adjust |

### Recommended Protocol

1. Pre-Sleep Routine
   | Time | Activity | Purpose |
   |------|----------|----------|
   | 2 hrs before | Reduce blue light | Melatonin production |
   | 1 hr before | Light stretching | Physical relaxation |
   | 30 min before | Meditation | Mental relaxation |

2. Environment Optimization
   - Temperature: 65-68°F
   - Lighting: Blackout curtains
   - Sound: White noise or silence

3. Supplement Support
   | Supplement | Dosage | Timing |
   |------------|---------|---------|
   | Magnesium | 300-400mg | 1 hr before bed |
   | L-Theanine | 200mg | 30 min before bed |`,
    
    `Your sleep patterns show some interesting trends:

| Metric | Average | Optimal | Status |
|--------|---------|---------|--------|
| Total Sleep | 7.2 hrs | 7.5-8.5 hrs | Needs improvement |
| Sleep Latency | 28 min | <15 min | Too long |
| Wake-ups | 3.2 | <2 | Too frequent |
| Deep Sleep | 1.8 hrs | 1.5-2.0 hrs | Good |

### Key Issues Identified
1. **Delayed Sleep Onset**: Your body temperature is staying elevated too late
2. **Frequent Awakenings**: Possibly related to evening hydration timing
3. **Early Morning Waking**: Light exposure may be disrupting your final sleep cycle

### Personalized Sleep Protocol
- Set bedroom temperature to 65-67°F
- Front-load hydration (finish 80% of daily water by 6pm)
- Try 4-7-8 breathing technique before bed (4 sec inhale, 7 sec hold, 8 sec exhale)
- Consider 300mg magnesium glycinate 1 hour before bed`
  ],

  "supplements": [
    `Based on your health profile, here are evidence-based recommendations:

### Core Supplements
| Supplement | Daily Dosage | Benefits | Timing |
|------------|--------------|-----------|---------|
| Vitamin D3+K2 | 5000 IU D3, 100mcg K2 | Immune & bone health | With breakfast |
| Magnesium | 300-400mg | Sleep & stress | Evening |
| Omega-3 | 2-3g | Heart & brain health | With meals |

### Goal-Specific Supplements
| Goal | Supplement | Dosage | Timing |
|------|------------|---------|---------|
| Sleep | Magnesium Glycinate | 300-400mg | 1 hr before bed |
| Recovery | L-Glutamine | 5g | Post-workout |
| Focus | Alpha-GPC | 300mg | Morning |

### Usage Protocol
1. Morning Stack
   - Vitamin D3+K2 with breakfast
   - Alpha-GPC (if focus is priority)

2. Post-Workout
   - L-Glutamine
   - Electrolytes as needed

3. Evening
   - Magnesium Glycinate
   - Omega-3 with dinner`,
    
    `Looking at your health data and goals, I recommend this personalized supplement protocol:

### Foundation Supplements (Daily)
| Supplement | Form | Dosage | Benefit |
|------------|------|--------|---------|
| Vitamin D3+K2 | Softgel | 5000 IU / 100mcg | Bone health, immunity |
| Magnesium Glycinate | Capsule | 300mg | Muscle recovery, sleep |
| Omega-3 | Softgel | 2g (600mg EPA/DHA) | Brain function, inflammation |

### Targeted Support (Based on your metrics)
Your sleep data shows room for improvement, and your stress markers are elevated:

| Supplement | When to Take | Dosage | Purpose |
|------------|--------------|--------|---------|
| Ashwagandha | Morning | 600mg | Cortisol management |
| L-Theanine | As needed | 200mg | Acute stress, focus |
| Zinc | With dinner | 15mg | Immune support |

Start with the foundation supplements for 3-4 weeks before adding the targeted ones.`
  ],

  "nutrition": [
    `Based on your recent data:

### Meal Timing Analysis
| Meal | Current Time | Ideal Time | Impact |
|------|--------------|------------|---------|
| Breakfast | 8:30 AM | 7:30 AM | Glucose spike |
| Lunch | 2:00 PM | 1:00 PM | Energy dip |
| Dinner | 8:00 PM | 6:30 PM | Sleep quality |

### Blood Sugar Response
| Metric | Value | Target | Status |
|--------|--------|--------|--------|
| Fasting Glucose | 95 mg/dL | <100 mg/dL | ✓ Good |
| Post-meal Spike | +45 mg/dL | <30 mg/dL | ! High |
| Recovery Time | 3 hours | 2 hours | ! Improve |

### Recommendations
1. Meal Timing
   - Shift dinner earlier by 90 minutes
   - Maintain 4-5 hour gaps between meals

2. Composition Improvements
   | Meal | Current | Recommended Change |
   |------|----------|-------------------|
   | Breakfast | High carb | Add protein first |
   | Lunch | Mixed | More fiber & fats |
   | Dinner | Heavy | Lighter, low carb |`,
    
    `Your nutrition patterns reveal some interesting insights:

### Glucose Response Patterns
| Food Category | Avg. Glucose Impact | Recovery Time |
|---------------|---------------------|---------------|
| Refined Carbs | +52 mg/dL | 3.2 hours |
| Protein-First Meals | +24 mg/dL | 1.5 hours |
| High-Fat Meals | +18 mg/dL | 1.8 hours |

### Key Observations
1. Your body responds particularly well to protein-first meals
2. Evening carbohydrates are disrupting your sleep quality
3. Hydration timing could be optimized (currently clustered in evening)

### Personalized Nutrition Strategy
- **Breakfast**: Add 20-30g protein before any carbohydrates
- **Lunch**: Include at least 2 cups of non-starchy vegetables
- **Dinner**: Shift to a protein + healthy fat focus, minimal carbs
- **Timing**: Try to finish eating 3 hours before bedtime
- **Hydration**: Front-load 70% of daily water before 3pm`
  ],

  "stress": [
    `Here's your personalized stress management plan:

### Current Status
| Metric | Value | Target | Status |
|--------|--------|--------|--------|
| HRV | 45ms | >50ms | ! Improve |
| Resting HR | 68bpm | <65bpm | ! Monitor |
| Sleep Quality | 85% | >85% | ✓ Good |
| Steps | 8,432 | 10,000 | ! Increase |

### Recommended Protocol
1. Morning Routine
   | Time | Activity | Duration |
   |------|----------|----------|
   | Wake | Deep breathing | 5 mins |
   | +15min | Meditation | 10 mins |
   | +30min | Light exercise | 20 mins |

2. Stress Management Tools
   | Technique | Frequency | Duration |
   |-----------|-----------|----------|
   | Box breathing | 3x daily | 5 mins |
   | Walking | 2x daily | 10 mins |
   | Meditation | 1-2x daily | 10 mins |

3. Supplement Support
   | Supplement | Dosage | Timing |
   |------------|---------|---------|
   | Magnesium | 300mg | Evening |
   | L-Theanine | 200mg | As needed |
   | Ashwagandha | 600mg | Morning |`,
    
    `Based on your HRV and sleep data, here's a customized stress resilience plan:

### Current Stress Indicators
| Metric | Your Value | Optimal | Status |
|--------|------------|---------|--------|
| Morning HRV | 45ms | >65ms | Needs improvement |
| Nighttime HR | 62 BPM | <60 BPM | Slightly elevated |
| Sleep Efficiency | 82% | >90% | Needs improvement |
| Stress Score | 68/100 | >80/100 | Moderate stress |

### 3-Part Stress Management Protocol

**1. Physiological Regulation**
- Morning sunlight exposure (5-10 minutes)
- Cold exposure therapy (30-60 second cold shower)
- Nasal breathing practice (5 minutes, 2x daily)

**2. Cognitive Reframing**
- Journaling: 3 daily gratitudes + 1 challenge reframe
- "Worry time": Schedule 15 minutes daily to process concerns
- Digital sunset: No work emails after 8pm

**3. Biological Support**
- Ashwagandha (600mg morning)
- Magnesium glycinate (300mg evening)
- Targeted exercise: Zone 2 cardio (30 min, 3x weekly)`
  ],

  "metabolic": [
    `Your metabolic health metrics show:

### Glucose Metrics
| Metric | Your Value | Target Range | Status |
|--------|------------|--------------|--------|
| Time in Range | 85% | >70% | ✓ Good |
| Average Glucose | 102 mg/dL | 70-120 mg/dL | ✓ Good |
| Variability | ±15 mg/dL | <20 mg/dL | ✓ Good |
| Fasting Glucose | 95 mg/dL | <100 mg/dL | ✓ Good |

### Patterns Identified
1. Post-Meal Responses
   - Breakfast spike: +45 mg/dL (target: <30 mg/dL)
   - Lunch response: +35 mg/dL
   - Dinner response: +25 mg/dL (good)

2. Recommendations
   | Meal | Current | Suggested Improvement |
   |------|---------|----------------------|
   | Breakfast | High carb first | Protein before carbs |
   | All meals | Sedentary after | 10-min walk after eating |
   | Evening | Late snacking | Cut off eating by 8pm |

3. Supplement Considerations
   - Berberine: 500mg with meals
   - Chromium: 200mcg daily
   - Apple cider vinegar: 1 tbsp before meals`,
    
    `Here's your metabolic health analysis:

### Current Metabolic Indicators
| Marker | Your Value | Optimal Range | Status |
|--------|------------|---------------|--------|
| Fasting Glucose | 95 mg/dL | 70-90 mg/dL | Borderline |
| Post-meal Peaks | 145 mg/dL | <140 mg/dL | Slightly high |
| Glucose Variability | 15 mg/dL | <15 mg/dL | Borderline |
| Time in Range | 85% | >90% | Good |

### Key Patterns Observed
1. **Morning Cortisol Effect**: Your fasting glucose is elevated, likely due to the dawn phenomenon
2. **Carb Sensitivity**: High glycemic response to refined carbohydrates, especially when eaten alone
3. **Exercise Benefit**: 20+ minute walks reduce your meal glucose response by approximately 22%

### Personalized Optimization Strategy
- **Meal Sequencing**: Consume fiber → protein → fats → carbs in that order
- **Movement Timing**: 10-15 minute walk within 30 minutes after meals
- **Specific Foods**: Your data shows berries, cinnamon, and apple cider vinegar significantly improve your glucose response
- **Fasting Window**: Aim for 12-14 hours overnight (e.g., 7pm to 9am)`
  ],

  "default": [
    `I understand you're interested in improving your health. Could you provide more specific details about your goals or concerns? This will help me give you more targeted advice based on your health data and personal objectives.

Here are some areas we can explore:

| Health Area | What We Can Analyze |
|-------------|-------------------|
| Sleep | Quality, duration, timing |
| Activity | Steps, exercise, recovery |
| Nutrition | Meal timing, composition |
| Stress | HRV, meditation, routines |
| Supplements | Personalized recommendations |

Please let me know which area you'd like to focus on!`,
    
    `Based on your recent health data, I see several areas where we could focus:

1. **Sleep optimization** - Your deep sleep is at 1.8 hours (good), but REM sleep could be improved
2. **Metabolic health** - Your glucose variability shows room for improvement
3. **Stress management** - Your HRV trends indicate moderate stress levels
4. **Recovery strategies** - Your workout recovery metrics suggest potential optimization

What specific aspect of your health would you like to discuss today?`,
    
    `I'm here to help with your health optimization journey. Your recent metrics show:

- Activity level: 8,432 steps (85% of target)
- Sleep quality: Good, with room for deep sleep improvement
- Stress levels: Moderate, based on HRV patterns
- Recovery: 78% (trending upward)

What specific area would you like to focus on improving today?`
  ]
};

// Function to get a random response from the array of responses for a given key
export function getRandomResponse(key: string): string {
  // Find the closest matching key
  let matchedKey = 'default';
  let bestMatchScore = 0;
  
  for (const responseKey of Object.keys(DEMO_RESPONSES)) {
    if (key.toLowerCase().includes(responseKey)) {
      // If we find an exact match, return it immediately
      if (responseKey.length > bestMatchScore) {
        matchedKey = responseKey;
        bestMatchScore = responseKey.length;
      }
    }
  }
  
  // Get the array of responses for the matched key
  const responses = DEMO_RESPONSES[matchedKey];
  
  // Return a random response from the array
  return responses[Math.floor(Math.random() * responses.length)];
}